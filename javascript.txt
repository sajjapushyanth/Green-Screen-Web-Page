java
<****************************************>
var fgimage=null;
var bgimage=null;
var fgcanvas;
var bgcanvas;
function loadForegroundImage(){
  var imgfile=document.getElementById("fgfile");
  fgimage=new SimpleImage(imgfile);
  fgcanvas=document.getElementById("can1");
  
  
  fgimage.drawTo(fgcanvas);
  
}
function loadBackgroundImage(){
  bgcanvas=document.getElementById("can2");
  var imgfile=document.getElementById("bgfile");
  bgimage=new SimpleImage(imgfile);
  bgimage.drawTo(bgcanvas);
  
}
function doGreenScreen(){
  if(fgimage==null || !fgimage.complete()){
    alert("foreground image not loaded");
    
  }
  if(bgimage==null || !bgimage.complete()){
    alert("background image not loaded");
    
}
  clearCanvas();
  var finalImage = createComposite();
  finalImage.drawTo(fgcanvas);
}
function createComposite(){
var output=new SimpleImage(fgimage.getWidth(),fgimage.getHeight());
   var greenThreshold = 240;
for(var p of fgimage.values()){
  var x=p.getX();
  var y=p.getY();
  if(p.getGreen()>greenThreshold){
    var bgpixel=bgimage.getPixel(x,y);
    output.setPixel(x,y,bgpixel);
    
  }
  else{
    output.setPixel(x,y,p);
  }
}
  return output;
}

function clearCanvas() {
  doClear(fgcanvas);
  doClear(bgcanvas);
}

function doClear(canvas) {
  var context = canvas.getContext("2d");
  context.clearRect(0,0,canvas.width,canvas.height);
}

